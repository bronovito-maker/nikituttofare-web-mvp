{
  "totalTests": 171,
  "passed": 124,
  "failed": 47,
  "categoryAccuracy": 90.64327485380117,
  "urgencyAccuracy": 78.3625730994152,
  "byCategory": {
    "gas": {
      "total": 3,
      "correct": 3,
      "accuracy": 100
    },
    "electric": {
      "total": 37,
      "correct": 32,
      "accuracy": 86.48648648648648
    },
    "locksmith": {
      "total": 34,
      "correct": 33,
      "accuracy": 97.05882352941177
    },
    "climate": {
      "total": 31,
      "correct": 27,
      "accuracy": 87.09677419354838
    },
    "plumbing": {
      "total": 37,
      "correct": 31,
      "accuracy": 83.78378378378379
    },
    "generic": {
      "total": 29,
      "correct": 29,
      "accuracy": 100
    }
  },
  "byUrgency": {
    "emergency": {
      "total": 40,
      "correct": 32,
      "accuracy": 80
    },
    "high": {
      "total": 61,
      "correct": 41,
      "accuracy": 67.21311475409836
    },
    "medium": {
      "total": 35,
      "correct": 33,
      "accuracy": 94.28571428571428
    },
    "low": {
      "total": 35,
      "correct": 28,
      "accuracy": 80
    }
  },
  "byUserType": {
    "elderly": {
      "total": 32,
      "correct": 19,
      "accuracy": 59.375
    },
    "horeca": {
      "total": 33,
      "correct": 22,
      "accuracy": 66.66666666666666
    },
    "tourist": {
      "total": 4,
      "correct": 2,
      "accuracy": 50
    },
    "private": {
      "total": 74,
      "correct": 62,
      "accuracy": 83.78378378378379
    },
    "panic": {
      "total": 12,
      "correct": 10,
      "accuracy": 83.33333333333334
    },
    "drunk": {
      "total": 16,
      "correct": 9,
      "accuracy": 56.25
    }
  },
  "failedCases": [
    {
      "index": 17,
      "input": {
        "category": "electric",
        "urgency": "high",
        "user_type": "horeca_manager",
        "text": "Insegna luminosa esterna in corto. Fa fumo e puzza di bruciato proprio sopra l'ingresso principale. I clienti hanno paura ad entrare.",
        "expected_action": "Intervento elettricista per messa in sicurezza insegna, cestello se necessario."
      },
      "analysis": {
        "category": "generic",
        "priority": "emergency",
        "emergency": true,
        "_debug": {
          "scores": {
            "gas": 0,
            "plumbing": 0,
            "electric": 0,
            "locksmith": 0,
            "climate": 0
          },
          "emergencyScore": 3,
          "highScore": 2,
          "capsRatio": 0.027522935779816515
        }
      },
      "categoryMatch": false,
      "urgencyMatch": true,
      "executionTime": 0
    },
    {
      "index": 19,
      "input": {
        "category": "gas",
        "urgency": "high",
        "user_type": "private_generic",
        "text": "Ho provato ad accendere il piano cottura ma fa una fiammata gialla enorme e si sente puzza. Ho chiuso la bombola.",
        "expected_action": "Elogiare la chiusura della bombola, invio tecnico per controllo ugelli e pressione."
      },
      "analysis": {
        "category": "climate",
        "priority": "medium",
        "emergency": false,
        "_debug": {
          "scores": {
            "gas": 10,
            "plumbing": 0,
            "electric": 0,
            "locksmith": 0,
            "climate": 5
          },
          "emergencyScore": 0,
          "highScore": 0,
          "capsRatio": 0.02197802197802198
        }
      },
      "categoryMatch": true,
      "urgencyMatch": false,
      "executionTime": 0
    },
    {
      "index": 20,
      "input": {
        "category": "generic",
        "urgency": "low",
        "user_type": "luxury_hotel_concierge",
        "text": "Gentili, si è allentata la testiera del letto nella camera 402. Necessitiamo di un falegname per il consolidamento entro il check-in delle ore 15:00.",
        "expected_action": "Tono formale, invio tuttofare entro il timeframe richiesto."
      },
      "analysis": {
        "category": "generic",
        "priority": "high",
        "emergency": false,
        "_debug": {
          "scores": {
            "gas": 0,
            "plumbing": 0,
            "electric": 0,
            "locksmith": 0,
            "climate": 0
          },
          "emergencyScore": 0,
          "highScore": 4,
          "capsRatio": 0.017699115044247787
        }
      },
      "categoryMatch": true,
      "urgencyMatch": false,
      "executionTime": 0
    },
    {
      "index": 34,
      "input": {
        "category": "climate",
        "urgency": "low",
        "user_type": "horeca_manager",
        "text": "Salve, vorrei un preventivo per installare delle barriere d'aria sopra l'ingresso del bistrot per non disperdere il calore d'inverno.",
        "expected_action": "Sopralluogo commerciale per dimensionamento barriere d'aria."
      },
      "analysis": {
        "category": "generic",
        "priority": "low",
        "emergency": false,
        "_debug": {
          "scores": {
            "gas": 0,
            "plumbing": 0,
            "electric": 0,
            "locksmith": 0,
            "climate": 0
          },
          "emergencyScore": 0,
          "highScore": 2,
          "capsRatio": 0.00909090909090909
        }
      },
      "categoryMatch": false,
      "urgencyMatch": true,
      "executionTime": 0
    },
    {
      "index": 45,
      "input": {
        "category": "generic",
        "urgency": "low",
        "user_type": "luxury_hotel_concierge",
        "text": "Si richiede la regolazione delle cerniere della porta tagliafuoco nel corridoio est. Produce un cigolio non consono agli standard dell'hotel.",
        "expected_action": "Manutenzione ferramenta, lubrificazione professionale."
      },
      "analysis": {
        "category": "locksmith",
        "priority": "emergency",
        "emergency": true,
        "_debug": {
          "scores": {
            "gas": 0,
            "plumbing": 0,
            "electric": 0,
            "locksmith": 5,
            "climate": 0
          },
          "emergencyScore": 3,
          "highScore": 2,
          "capsRatio": 0.01680672268907563
        }
      },
      "categoryMatch": true,
      "urgencyMatch": false,
      "executionTime": 0
    },
    {
      "index": 47,
      "input": {
        "category": "electric",
        "urgency": "low",
        "user_type": "private_elderly",
        "text": "mi si sono bruciate tutte le lampadine del lampadario grande non ci arrivo con la scala",
        "expected_action": "Intervento 'piccole manutenzioni' per sostituzione lampadine e controllo portalampade."
      },
      "analysis": {
        "category": "generic",
        "priority": "emergency",
        "emergency": true,
        "_debug": {
          "scores": {
            "gas": 0,
            "plumbing": 0,
            "electric": 0,
            "locksmith": 0,
            "climate": 0
          },
          "emergencyScore": 3,
          "highScore": 0,
          "capsRatio": 0
        }
      },
      "categoryMatch": false,
      "urgencyMatch": false,
      "executionTime": 0
    },
    {
      "index": 48,
      "input": {
        "category": "locksmith",
        "urgency": "emergency",
        "user_type": "horeca_staff",
        "text": "Chiusi fuori dal magazzino bevande, la chiave si è spezzata dentro. Tra mezz'ora inizia il turno e non abbiamo le bottiglie!",
        "expected_action": "Apertura forzata e sostituzione cilindro rapida per attività commerciale."
      },
      "analysis": {
        "category": "locksmith",
        "priority": "medium",
        "emergency": false,
        "_debug": {
          "scores": {
            "gas": 0,
            "plumbing": 0,
            "electric": 0,
            "locksmith": 10,
            "climate": 0
          },
          "emergencyScore": 0,
          "highScore": 0,
          "capsRatio": 0.020202020202020204
        }
      },
      "categoryMatch": true,
      "urgencyMatch": false,
      "executionTime": 0
    },
    {
      "index": 49,
      "input": {
        "category": "climate",
        "urgency": "high",
        "user_type": "horeca_manager",
        "text": "Il sistema di estrazione fumi della cucina è andato. C'è nebbia in sala, non si respira. Devo chiudere tutto se non risolvete.",
        "expected_action": "Intervento urgente su motori aspirazione cappe industriali."
      },
      "analysis": {
        "category": "climate",
        "priority": "medium",
        "emergency": false,
        "_debug": {
          "scores": {
            "gas": 0,
            "plumbing": 0,
            "electric": 0,
            "locksmith": 0,
            "climate": 5
          },
          "emergencyScore": 0,
          "highScore": 0,
          "capsRatio": 0.030612244897959183
        }
      },
      "categoryMatch": true,
      "urgencyMatch": false,
      "executionTime": 0
    },
    {
      "index": 52,
      "input": {
        "category": "electric",
        "urgency": "high",
        "user_type": "tourist_vague",
        "text": "The phone charger exploded in the socket and now all lights are off. We smell smoke. What do we do?",
        "expected_action": "Istruire su distacco corrente, ispezione danni all'impianto, invio elettricista."
      },
      "analysis": {
        "category": "electric",
        "priority": "medium",
        "emergency": false,
        "_debug": {
          "scores": {
            "gas": 0,
            "plumbing": 0,
            "electric": 15,
            "locksmith": 0,
            "climate": 0
          },
          "emergencyScore": 0,
          "highScore": 0,
          "capsRatio": 0.03896103896103896
        }
      },
      "categoryMatch": true,
      "urgencyMatch": false,
      "executionTime": 0
    },
    {
      "index": 55,
      "input": {
        "category": "generic",
        "urgency": "high",
        "user_type": "horeca_manager",
        "text": "Si è staccato un pezzo di intonaco dal soffitto della hall. Per fortuna non ha preso nessuno. Serve subito un muratore per ripristinare e controllare il resto.",
        "expected_action": "Messa in sicurezza soffitto, controllo sfondellamento solai."
      },
      "analysis": {
        "category": "climate",
        "priority": "medium",
        "emergency": false,
        "_debug": {
          "scores": {
            "gas": 0,
            "plumbing": 0,
            "electric": 0,
            "locksmith": 0,
            "climate": 5
          },
          "emergencyScore": 0,
          "highScore": 0,
          "capsRatio": 0.023255813953488372
        }
      },
      "categoryMatch": true,
      "urgencyMatch": false,
      "executionTime": 0
    },
    {
      "index": 57,
      "input": {
        "category": "electric",
        "urgency": "low",
        "user_type": "luxury_hotel_concierge",
        "text": "Si richiede l'installazione di una stazione di ricarica per veicoli elettrici nel parcheggio ospiti. Necessitiamo di consulenza tecnica sulla potenza disponibile.",
        "expected_action": "Sopralluogo tecnico per installazione Wallbox."
      },
      "analysis": {
        "category": "electric",
        "priority": "high",
        "emergency": false,
        "_debug": {
          "scores": {
            "gas": 0,
            "plumbing": 0,
            "electric": 10,
            "locksmith": 0,
            "climate": 0
          },
          "emergencyScore": 0,
          "highScore": 2,
          "capsRatio": 0.014388489208633094
        }
      },
      "categoryMatch": true,
      "urgencyMatch": false,
      "executionTime": 0
    },
    {
      "index": 58,
      "input": {
        "category": "locksmith",
        "urgency": "medium",
        "user_type": "private_tech_savvy",
        "text": "Vorrei installare una serratura smart Nuki ma ho un cilindro senza doppia funzione frizionata. Potete sostituire il cilindro con uno compatibile?",
        "expected_action": "Inviare fabbro esperto smart-lock con cilindro frizionato a misura."
      },
      "analysis": {
        "category": "locksmith",
        "priority": "low",
        "emergency": false,
        "_debug": {
          "scores": {
            "gas": 0,
            "plumbing": 0,
            "electric": 0,
            "locksmith": 15,
            "climate": 0
          },
          "emergencyScore": 0,
          "highScore": 0,
          "capsRatio": 0.024390243902439025
        }
      },
      "categoryMatch": true,
      "urgencyMatch": false,
      "executionTime": 1
    },
    {
      "index": 59,
      "input": {
        "category": "climate",
        "urgency": "emergency",
        "user_type": "private_elderly",
        "text": "sono tre giorni che non ho riscaldamento e sto male vi prego aiutatemi non ho soldi per una caldaia nuova",
        "expected_action": "Priorità sociale, invio tecnico per riparazione economica o valutazione bonus, tono empatico."
      },
      "analysis": {
        "category": "climate",
        "priority": "medium",
        "emergency": false,
        "_debug": {
          "scores": {
            "gas": 0,
            "plumbing": 0,
            "electric": 0,
            "locksmith": 0,
            "climate": 15
          },
          "emergencyScore": 0,
          "highScore": 0,
          "capsRatio": 0
        }
      },
      "categoryMatch": true,
      "urgencyMatch": false,
      "executionTime": 0
    },
    {
      "index": 73,
      "input": {
        "category": "locksmith",
        "urgency": "emergency",
        "user_type": "tourist_vague",
        "text": "HELP! the door closed with the wind and the baby is inside the house ALONE we are in the hallway",
        "expected_action": "Codice rosso assoluto, invio fabbro flash, allertare emergenza se necessario."
      },
      "analysis": {
        "category": "locksmith",
        "priority": "medium",
        "emergency": false,
        "_debug": {
          "scores": {
            "gas": 0,
            "plumbing": 0,
            "electric": 0,
            "locksmith": 5,
            "climate": 0
          },
          "emergencyScore": 0,
          "highScore": 0,
          "capsRatio": 0.11842105263157894
        }
      },
      "categoryMatch": true,
      "urgencyMatch": false,
      "executionTime": 0
    },
    {
      "index": 74,
      "input": {
        "category": "climate",
        "urgency": "low",
        "user_type": "private_tech_savvy",
        "text": "Il sensore di umidità della VMC non attiva la ventola. Probabile guasto al sensore o cablaggio bus interrotto.",
        "expected_action": "Inviare tecnico specializzato in ventilazione meccanica controllata."
      },
      "analysis": {
        "category": "climate",
        "priority": "high",
        "emergency": false,
        "_debug": {
          "scores": {
            "gas": 0,
            "plumbing": 0,
            "electric": 0,
            "locksmith": 0,
            "climate": 10
          },
          "emergencyScore": 0,
          "highScore": 4,
          "capsRatio": 0.05555555555555555
        }
      },
      "categoryMatch": true,
      "urgencyMatch": false,
      "executionTime": 0
    }
  ]
}